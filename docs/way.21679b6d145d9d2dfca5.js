webpackJsonp([2],{0:function(e,t,a){e.exports=a(124)},124:function(e,t,a){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}var o=a(125),n=t(o);a(126),e(function(){(0,n["default"])()})}).call(t,a(1))},125:function(e,t,a){(function(e,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(106),s=n(i),l=a(111),d=n(l),r=a(115),u=n(r),f=a(116),c=n(f),m=a(120),h=n(m),v=a(17),g=n(v),p=a(121),w=n(p),y=a(14),x=n(y),M=function(){function t(){(0,u["default"])(this,t),this.data={},this.init(),this.status={isMoveing:!1},this.index=-1,this.page=null,this.canMouse=!1}return(0,c["default"])(t,[{key:"init",value:function(){var t=this;e("body").on("mousewheel",function(a){if(0==a.deltaY||t.status.isMoveing)return!1;var o=a.deltaY<0,n=!o,i=t.getScrollPostion(),s="up",l=!1;i.isBottom&&o&&t.data.way.onway.length-1>t.index?(t.index++,l=!0):n&&i.isTop&&(t.index>0?(t.index--,s="down",l=!0):0==t.index&&(t.index--,t.togglePage(t.page,e(".userInfo"),"down"))),t.index>-1&&l&&t.changePage(s)}),this.getData()}},{key:"changePage",value:function(t){var a=this;a.togglePage(a.page,e("#momentInfo_"+a.index),t),a.map.move(a.index,1e3),a.doms.timelines.filter(".focused").removeClass("focused").tooltipster("hide");var o=a.doms.timelines.filter("[index='"+a.index+"']");a.doms.timelinesDiv.width()/2-o.position().left-a.doms.timelinesDiv.scrollLeft()<0?a.doms.timelinesDiv.scrollLeft(a.doms.timelinesDiv.scrollLeft()+o.position().left-a.doms.timelinesDiv.width()/2,100):a.doms.timelinesDiv.width()/2-o.position().left>0&&a.doms.timelinesDiv.scrollLeft(0,100),o.addClass("focused").tooltipster("show")}},{key:"togglePage",value:function(e,t,a){var o=this;o.hideMouse(),o.status.isMoveing=!0,e.addClass("transform from-start "+a),t.addClass("show transform to-start "+a),t.scrollTop(0),o.page=t,setTimeout(function(){e.addClass("from-end"),t.addClass("to-end")},0),setTimeout(function(){o.status.isMoveing=!1,e.removeClass("show transform from-start from-end "+a),t.removeClass("transform to-start to-end "+a),e.scrollTop(0),o.loadImages(),o.getScrollPostion()},1e3)}},{key:"loadImages",value:function(){var t=this;e(".images img",t.page).each(function(t,a){var o=e(a);o.data("havepic")||(a.src=o.attr("vsrc"),o.data("havepic",!0))})}},{key:"getScrollPostion",value:function(e){e=e||0;var t=this,a=!1,o=!1,n=t.page.scrollTop(),i=t.page.height(),s=t.page.children().height(),l=s-(n+i),d=l<110;return a=0==n,o=i>=s||0==l,d?t.showMouse():t.hideMouse(),{isTop:a,isBottom:o,isPageDown:d,y:n}}},{key:"showMouse",value:function(){var e=this;return!e.canMouse&&(e.doms.mouse.addClass("show"),void(e.canMouse=!0))}},{key:"hideMouse",value:function(){var e=this;return!!e.canMouse&&(e.doms.mouse.removeClass("show"),void(e.canMouse=!1))}},{key:"dealData",value:function(){var e=this,t=e.data.way;t.start=t.onway[0],t.end=t.plan[t.plan.length-1];var a=[],o=[],n=void 0,i={},l=function(){if(o.length>0){var e={date:o[0].date,data:o};e.showDate=(0,x["default"])(e.date).format(),a.push(e),o=[]}},r=!0,u=!1,f=void 0;try{for(var c,m=(0,d["default"])(t.onway.entries());!(r=(c=m.next()).done);r=!0){var h=(0,s["default"])(c.value,2),v=h[0],g=h[1];g.dateShow=(0,x["default"])(g.date).format("kk"),g.dateTime=(0,x["default"])(g.date).format("HH:mm"),g.index=v,n&&(0!==(0,x["default"])(g.date).distance(n.date)&&l(),i[v]=a.length),o.push(g),n=g}}catch(p){u=!0,f=p}finally{try{!r&&m["return"]&&m["return"]()}finally{if(u)throw f}}l(),e.data.daysIndex=i,e.data.days=a,console.log(e.data);var w=!0,y=!1,M=void 0;try{for(var D,k=(0,d["default"])(t.plan.entries());!(w=(D=k.next()).done);w=!0){var P=(0,s["default"])(D.value,2),v=P[0],g=P[1];v!=t.plan.length-1&&0!=v&&delete g.location}}catch(p){y=!0,M=p}finally{try{!w&&k["return"]&&k["return"]()}finally{if(y)throw M}}t.now=t.onway[t.onway.length-1]}},{key:"getData",value:function(){var t=this;o.A.get("data/data.json",function(a){if(1==a.status){t.data=a.content,t.dealData();var o=g["default"].compile(w["default"].detailInfo);e("#blog .container").append(o(t.data));var n=g["default"].compile(w["default"].timeLine);e("#timeline").append(n(t.data)),t.doms={mouse:e("#mouse-next"),container:e("#blog>.container"),timelines:e("#timeline .time"),timelinesDiv:e("#timeline")},t.doms.timelines.each(function(t,a){var o=a.title;e(a).tooltipster({position:"bottom",content:o,theme:"tooltipster-shadow",multiple:!0}),e(a).tooltipster({position:"bottom",content:o,trigger:"click",autoClose:"false",theme:"tooltipster-shadow",multiple:!0})}),t.page=e(".userInfo");var i=t.getScrollPostion();t.canMouse=!i.isPageDown,i.isPageDown?t.showMouse():t.hideMouse(),t.map=new h["default"]("mapContainer",h["default"].GAODE,t.data.way,{user_marker:!0,polyline_animated:!0,zoom:!0}),t.doms.timelines.on("click",function(){var a=e(this),o=parseInt(a.attr("index")),n=t.index>o?"down":"up";t.index=o,t.changePage(n)})}})}}]),t}(),D=function(){return new M};t["default"]=D}).call(t,a(1),a(18))},126:function(e,t){}});
//# sourceMappingURL=way.21679b6d145d9d2dfca5.js.map