{"version":3,"sources":["webpack:///way.5d14dad21e49bd04e2a0.js","webpack:///./way.js","webpack:///./js/way/control.js"],"names":["webpackJsonp",0,"module","exports","__webpack_require__",96,"$","_interopRequireDefault","obj","__esModule","default","_control","_control2","call",97,"Common","_slicedToArray2","_slicedToArray3","_getIterator2","_getIterator3","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","Object","defineProperty","value","_map","_map2","_handlebars","_handlebars2","_template","_template2","_momentjs","_momentjs2","preventDefault","event","stopImmediatePropagation","Control","this","data","init","status","isMoveing","index","page","canMouse","key","C","on","deltaY","isUp","isDown","pos","getScrollPostion","type","move","isBottom","way","onway","length","isTop","togglePage","changePage","getData","map","doms","timelines","filter","removeClass","tooltipster","off","NowTimeLet","timelinesDiv","width","offset","left","scrollLeft","addClass","from","to","hideMouse","scrollTop","setTimeout","loadImages","each","i","n","_n","src","attr","y","_h","height","_bodyHeight","children","_y","isPageDown","showMouse","mouse","content","start","end","plan","days","nowDays","old_w","undefined","daysIndex","initDay","day","date","showDate","format","push","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","entries","next","done","_step$value","w","dateShow","dateTime","distance","err","console","log","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_step2$value","location","now","A","get","result","dealData","travelInfoTemp","compile","detailInfo","append","timelineTemp","timeLine","position","theme","container","user_marker","polyline_animated","zoom","_this","_index","parseInt","getControl",98],"mappings":"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","file":"way.5d14dad21e49bd04e2a0.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(96);\n\n\n/***/ },\n\n/***/ 96:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function($) {\"use strict\";\n\t\n\tvar _control = __webpack_require__(97);\n\t\n\tvar _control2 = _interopRequireDefault(_control);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tif (false) {\n\t\tCommon.U.loadCss(\"css/way.css\");\n\t} else {\n\t\t__webpack_require__(98);\n\t}\n\t\n\t$(function () {\n\t\t(0, _control2.default)();\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\n\n/***/ },\n\n/***/ 97:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function($, Common) {\"use strict\";\n\t\n\tvar _slicedToArray2 = __webpack_require__(69);\n\t\n\tvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\t\n\tvar _getIterator2 = __webpack_require__(84);\n\t\n\tvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\t\n\tvar _classCallCheck2 = __webpack_require__(88);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(89);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _map = __webpack_require__(92);\n\t\n\tvar _map2 = _interopRequireDefault(_map);\n\t\n\tvar _handlebars = __webpack_require__(17);\n\t\n\tvar _handlebars2 = _interopRequireDefault(_handlebars);\n\t\n\tvar _template = __webpack_require__(93);\n\t\n\tvar _template2 = _interopRequireDefault(_template);\n\t\n\tvar _momentjs = __webpack_require__(14);\n\t\n\tvar _momentjs2 = _interopRequireDefault(_momentjs);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// require(\"../../css/animate.min.css\");\n\t\n\tvar preventDefault = function preventDefault(event) {\n\t    event.preventDefault();\n\t    event.stopImmediatePropagation();\n\t    return false;\n\t};\n\t\n\tvar Control = function () {\n\t    function Control() {\n\t        (0, _classCallCheck3.default)(this, Control);\n\t\n\t        // this.container = $(container);\n\t        this.data = {};\n\t        this.init();\n\t        this.status = { isMoveing: false };\n\t        this.index = -1;\n\t        this.page = null;\n\t        //momentInfo_\n\t        this.canMouse = false;\n\t        // this.x = 0\n\t    }\n\t\n\t    (0, _createClass3.default)(Control, [{\n\t        key: \"init\",\n\t        value: function init() {\n\t\n\t            var C = this;\n\t            $(\"body\").on(\"mousewheel\", function (event) {\n\t                if (event.deltaY == 0 || C.status.isMoveing) return false;\n\t                var isUp = event.deltaY < 0,\n\t                    isDown = !isUp;\n\t                var pos = C.getScrollPostion();\n\t                var type = \"up\",\n\t                    move = false;\n\t                // console.log(isUp,pos.isTop);\n\t                if (pos.isBottom && isUp && C.data.way.onway.length - 1 > C.index) {\n\t                    C.index++;\n\t                    move = true;\n\t                } else if (isDown && pos.isTop) {\n\t                    if (C.index > 0) {\n\t                        C.index--;\n\t                        type = \"down\";\n\t                        move = true;\n\t                    } else if (C.index == 0) {\n\t                        C.index--;\n\t                        C.togglePage(C.page, $(\".userInfo\"), \"down\");\n\t                    }\n\t                }\n\t\n\t                if (C.index > -1 && move) {\n\t                    C.changePage(type);\n\t                }\n\t            });\n\t            this.getData();\n\t        }\n\t    }, {\n\t        key: \"changePage\",\n\t        value: function changePage(type) {\n\t            var C = this;\n\t            C.togglePage(C.page, $(\"#momentInfo_\" + C.index), type);\n\t            C.map.move(C.index, 1000);\n\t            C.doms.timelines.filter(\".focused\").removeClass(\"focused\").tooltipster('hide').off(\"mouseover mouseout\", preventDefault);\n\t            var NowTimeLet = C.doms.timelines.filter(\"[index='\" + C.index + \"']\").on(\"mouseover mouseout\", preventDefault);\n\t            if (C.doms.timelinesDiv.width() / 2 - NowTimeLet.offset().left < 0) C.doms.timelinesDiv.scrollLeft(NowTimeLet.offset().left - C.doms.timelinesDiv.width() / 2);else if (C.doms.timelinesDiv.width() / 2 - NowTimeLet.offset().left > 0) {\n\t                C.doms.timelinesDiv.scrollLeft(0);\n\t            }\n\t            NowTimeLet.addClass(\"focused\").tooltipster('show');\n\t        }\n\t    }, {\n\t        key: \"togglePage\",\n\t        value: function togglePage(from, to, type) {\n\t            var C = this;\n\t            C.hideMouse();\n\t            C.status.isMoveing = true;\n\t            // C.doms.container.css(\"overflow-y\",\"hidden\");\n\t            from.addClass(\"transform from-start \" + type);\n\t            to.addClass(\"show transform to-start \" + type);\n\t            to.scrollTop(0);\n\t            C.page = to;\n\t            setTimeout(function () {\n\t                from.addClass(\"from-end\");\n\t                to.addClass(\"to-end\");\n\t            }, 0);\n\t            setTimeout(function () {\n\t                C.status.isMoveing = false;\n\t                from.removeClass(\"show transform from-start from-end \" + type);\n\t                to.removeClass(\"transform to-start to-end \" + type);\n\t                from.scrollTop(0);\n\t                C.loadImages();\n\t                C.getScrollPostion();\n\t            }, 1 * 1000);\n\t        }\n\t    }, {\n\t        key: \"loadImages\",\n\t        value: function loadImages() {\n\t            var C = this;\n\t            $(\".images img\", C.page).each(function (i, n) {\n\t                var _n = $(n);\n\t                if (!_n.data(\"havepic\")) {\n\t                    n.src = _n.attr(\"vsrc\");\n\t                    // _n.css(\"background-image\",\"url(\"+_n.attr(\"src\")+\")\");\n\t                    _n.data(\"havepic\", true);\n\t                }\n\t            });\n\t        }\n\t    }, {\n\t        key: \"getScrollPostion\",\n\t        value: function getScrollPostion(y) {\n\t            y = y || 0;\n\t            var C = this;\n\t            var isTop = false,\n\t                isBottom = false;\n\t            var scrollTop = C.page.scrollTop();\n\t            var _h = C.page.height();\n\t            var _bodyHeight = C.page.children().height();\n\t            var _y = _bodyHeight - (scrollTop + _h);\n\t            var isPageDown = _y < 110;\n\t            isTop = scrollTop == 0;\n\t            isBottom = _h >= _bodyHeight || _y == 0;\n\t            if (isPageDown) {\n\t                C.showMouse();\n\t            } else {\n\t                C.hideMouse();\n\t            }\n\t\n\t            return { isTop: isTop, isBottom: isBottom, isPageDown: isPageDown, y: scrollTop };\n\t        }\n\t    }, {\n\t        key: \"showMouse\",\n\t        value: function showMouse() {\n\t            var C = this;\n\t            if (C.canMouse) return false;\n\t            C.doms.mouse.addClass('show');\n\t            C.canMouse = true;\n\t        }\n\t    }, {\n\t        key: \"hideMouse\",\n\t        value: function hideMouse() {\n\t            var C = this;\n\t            if (!C.canMouse) return false;\n\t            C.doms.mouse.removeClass(\"show\");\n\t            C.canMouse = false;\n\t        }\n\t    }, {\n\t        key: \"dealData\",\n\t        value: function dealData() {\n\t            var C = this;\n\t            var content = C.data.way;\n\t            content.start = content.onway[0];\n\t            content.end = content.plan[content.plan.length - 1];\n\t            // let startDateShow = moment(content.startDate).format(\"k\");\n\t            // content.startDateShow = {\n\t            // \tmonth:startDate.month()+1,\n\t            // \tdate:startDate.date(),\n\t            // \tyear:startDate.year()\n\t            // };\n\t            var days = [],\n\t                nowDays = [],\n\t                old_w = undefined,\n\t                daysIndex = {};\n\t\n\t            var initDay = function initDay() {\n\t                if (nowDays.length > 0) {\n\t                    var day = { date: nowDays[0].date, data: nowDays };\n\t                    day.showDate = (0, _momentjs2.default)(day.date).format();\n\t                    days.push(day);\n\t                    nowDays = [];\n\t                }\n\t            };\n\t\n\t            var _iteratorNormalCompletion = true;\n\t            var _didIteratorError = false;\n\t            var _iteratorError = undefined;\n\t\n\t            try {\n\t                for (var _iterator = (0, _getIterator3.default)(content.onway.entries()), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t                    var _step$value = (0, _slicedToArray3.default)(_step.value, 2);\n\t\n\t                    var i = _step$value[0];\n\t                    var w = _step$value[1];\n\t\n\t                    w.dateShow = (0, _momentjs2.default)(w.date).format(\"kk\");\n\t                    w.dateTime = (0, _momentjs2.default)(w.date).format(\"HH:mm\");\n\t                    w.index = i;\n\t                    if (old_w) {\n\t                        if ((0, _momentjs2.default)(w.date).distance(old_w.date) !== 0) {\n\t                            initDay();\n\t                        }\n\t                        daysIndex[i] = days.length;\n\t                    }\n\t                    nowDays.push(w);\n\t                    old_w = w;\n\t                    // if(i!=content.onway.length-1){\n\t                    // \tdelete w.location;\n\t                    // }\n\t                }\n\t            } catch (err) {\n\t                _didIteratorError = true;\n\t                _iteratorError = err;\n\t            } finally {\n\t                try {\n\t                    if (!_iteratorNormalCompletion && _iterator.return) {\n\t                        _iterator.return();\n\t                    }\n\t                } finally {\n\t                    if (_didIteratorError) {\n\t                        throw _iteratorError;\n\t                    }\n\t                }\n\t            }\n\t\n\t            initDay();\n\t\n\t            C.data.daysIndex = daysIndex;\n\t            C.data.days = days;\n\t            console.log(C.data);\n\t\n\t            var _iteratorNormalCompletion2 = true;\n\t            var _didIteratorError2 = false;\n\t            var _iteratorError2 = undefined;\n\t\n\t            try {\n\t                for (var _iterator2 = (0, _getIterator3.default)(content.plan.entries()), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t                    var _step2$value = (0, _slicedToArray3.default)(_step2.value, 2);\n\t\n\t                    var i = _step2$value[0];\n\t                    var w = _step2$value[1];\n\t\n\t                    if (i != content.plan.length - 1 && i != 0) {\n\t                        delete w.location;\n\t                    }\n\t                }\n\t            } catch (err) {\n\t                _didIteratorError2 = true;\n\t                _iteratorError2 = err;\n\t            } finally {\n\t                try {\n\t                    if (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t                        _iterator2.return();\n\t                    }\n\t                } finally {\n\t                    if (_didIteratorError2) {\n\t                        throw _iteratorError2;\n\t                    }\n\t                }\n\t            }\n\t\n\t            content.now = content.onway[content.onway.length - 1];\n\t        }\n\t    }, {\n\t        key: \"getData\",\n\t        value: function getData() {\n\t            var C = this;\n\t            Common.A.get(\"data/data.json\", function (result) {\n\t                if (result.status == 1) {\n\t                    C.data = result.content;\n\t                    C.dealData();\n\t\n\t                    var travelInfoTemp = _handlebars2.default.compile(_template2.default.detailInfo);\n\t                    $('#blog .container').append(travelInfoTemp(C.data));\n\t\n\t                    var timelineTemp = _handlebars2.default.compile(_template2.default.timeLine);\n\t                    $('#timeline').append(timelineTemp(C.data));\n\t\n\t                    $(\"#timeline .time\").tooltipster({\n\t                        position: 'bottom',\n\t                        theme: 'tooltipster-shadow'\n\t                    });\n\t\n\t                    C.doms = {\n\t                        mouse: $(\"#mouse-next\"),\n\t                        container: $('#blog>.container'),\n\t                        timelines: $(\"#timeline .time\"),\n\t                        timelinesDiv: $(\"#timeline\")\n\t                    };\n\t                    //初次执行；\n\t                    C.page = $(\".userInfo\");\n\t                    var pos = C.getScrollPostion();\n\t                    C.canMouse = !pos.isPageDown;\n\t                    if (pos.isPageDown) {\n\t                        C.showMouse();\n\t                    } else {\n\t                        C.hideMouse();\n\t                    }\n\t                    // for(let [i,data] of C.data.content.entries()){\n\t                    // \tlet content = data.way;\n\t                    // \tlet mapDom = $(\"#mapContainer_\" + i);\n\t\n\t                    C.map = new _map2.default(\"mapContainer\", C.data.way, { user_marker: true, polyline_animated: true, zoom: true });\n\t                    C.doms.timelines.filter(\"[index='0']\").addClass(\"focused\");\n\t                    C.doms.timelines.on(\"click\", function () {\n\t                        var _this = $(this);\n\t                        var _index = parseInt(_this.attr(\"index\"));\n\t                        var type = C.index > _index ? \"down\" : \"up\";\n\t                        C.index = _index;\n\t                        C.changePage(type);\n\t                    });\n\t                    // let drawPoly = map.drawPolyline(C.data.way.plan,Map.GREY);\n\t                    // let drawPoly = map.drawPolyline(C.data.way.onway,Map.COLORFUL);\n\t                    // \tmap.drawPolyline(content.onway,Map.COLORFUL);\n\t                    // \tmap.focus(drawPoly);\n\t                    // $(\".leaflet-marker-icon\").tooltipster();\n\t                    // }\n\t                }\n\t            });\n\t        }\n\t    }]);\n\t    return Control;\n\t}();\n\t\n\tvar getControl = function getControl() {\n\t    return new Control();\n\t};\n\texports.default = getControl;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1), __webpack_require__(18)))\n\n/***/ },\n\n/***/ 98:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** way.5d14dad21e49bd04e2a0.js\n **/","import control from './js/way/control';\n\nif(WEBPACK_DEBUG){\n\tCommon.U.loadCss(\"css/way.css\");\n}else{\n\trequire(\"./css/way.css\");\n}\n\n$(()=>{\n\tcontrol();\n})\n\n\n\n/** WEBPACK FOOTER **\n ** ./way.js\n **/","import Map from '../plugin/map';\nimport Handlebars from \"handlebars\";\nimport template from \"../template\";\nimport moment from \"momentjs\";\n// require(\"../../css/animate.min.css\");\n\n\nlet preventDefault = function(event){\n\tevent.preventDefault();\n\tevent.stopImmediatePropagation();\n\treturn false;\n};\nclass Control {\n    constructor() {\n        // this.container = $(container);\n        this.data = {};\n        this.init();\n        this.status = { isMoveing: false };\n        this.index = -1;\n        this.page = null;\n        //momentInfo_\n        this.canMouse = false;\n        // this.x = 0\n    }\n\n    init() {\n\n        let C = this;\n        $(\"body\").on(\"mousewheel\", function(event) {\n            if (event.deltaY == 0 || C.status.isMoveing) return false;\n            let isUp = event.deltaY < 0,\n                isDown = !isUp;\n            let pos = C.getScrollPostion();\n            let type = \"up\",move=false;\n            // console.log(isUp,pos.isTop);\n            if (pos.isBottom && isUp && C.data.way.onway.length - 1 > C.index) {\n                C.index++;\n                move = true;\n            } else if (isDown && pos.isTop) {\n                if (C.index > 0) {\n                    C.index--;\n                    type = \"down\";\n                \tmove = true;\n                } else if (C.index == 0) {\n                    C.index--;\n                    C.togglePage(C.page, $(\".userInfo\"), \"down\");\n                }\n            }\n\n            if(C.index>-1&&move){\n            \tC.changePage(type);\n            }\n        });\n        this.getData();\n    }\n\n    changePage(type){\n        let C = this;\n        C.togglePage(C.page, $(\"#momentInfo_\" + C.index), type);\n        C.map.move(C.index, 1000);\n        C.doms.timelines.filter(\".focused\").removeClass(\"focused\").tooltipster('hide').off(\"mouseover mouseout\",preventDefault);\n        let NowTimeLet = C.doms.timelines.filter(\"[index='\"+C.index+\"']\").on(\"mouseover mouseout\",preventDefault);\n        if(C.doms.timelinesDiv.width()/2-NowTimeLet.offset().left<0)\n        \tC.doms.timelinesDiv.scrollLeft(NowTimeLet.offset().left-C.doms.timelinesDiv.width()/2);\n        else if(C.doms.timelinesDiv.width()/2-NowTimeLet.offset().left>0){\n        \tC.doms.timelinesDiv.scrollLeft(0);\n        }\n        NowTimeLet.addClass(\"focused\").tooltipster('show');\n    }\n\n    togglePage(from, to, type) {\n        let C = this;\n        C.hideMouse();\n        C.status.isMoveing = true;\n        // C.doms.container.css(\"overflow-y\",\"hidden\");\n        from.addClass(\"transform from-start \" + type);\n        to.addClass(\"show transform to-start \" + type);\n        to.scrollTop(0);\n        C.page = to;\n        setTimeout(function() {\n            from.addClass(\"from-end\");\n            to.addClass(\"to-end\");\n        }, 0);\n        setTimeout(function() {\n            C.status.isMoveing = false;\n            from.removeClass(\"show transform from-start from-end \" + type);\n            to.removeClass(\"transform to-start to-end \" + type);\n            from.scrollTop(0);\n            C.loadImages();\n            C.getScrollPostion();\n        }, 1 * 1000);\n    }\n\n    loadImages() {\n        let C = this;\n        $(\".images img\", C.page).each(function(i, n) {\n            let _n = $(n);\n            if (!_n.data(\"havepic\")) {\n                n.src = _n.attr(\"vsrc\");\n                // _n.css(\"background-image\",\"url(\"+_n.attr(\"src\")+\")\");\n                _n.data(\"havepic\", true);\n            }\n        });\n    }\n\n    getScrollPostion(y) {\n        y = y || 0;\n        let C = this;\n        let isTop = false,\n            isBottom = false;\n        let scrollTop = C.page.scrollTop();\n        let _h = C.page.height();\n        let _bodyHeight = C.page.children().height();\n        let _y = (_bodyHeight) - (scrollTop + _h);\n        let isPageDown = _y < 110;\n        isTop = scrollTop == 0;\n        isBottom = _h >= _bodyHeight || _y == 0;\n        if (isPageDown) {\n            C.showMouse();\n        } else {\n            C.hideMouse();\n        }\n\n        return { isTop, isBottom, isPageDown, y: scrollTop };\n    }\n\n    showMouse() {\n        let C = this;\n        if (C.canMouse) return false;\n        C.doms.mouse.addClass('show');\n        C.canMouse = true;\n    }\n\n    hideMouse() {\n        let C = this;\n        if (!C.canMouse) return false;\n        C.doms.mouse.removeClass(\"show\");\n        C.canMouse = false;\n    }\n\n    dealData() {\n        let C = this;\n        let content = C.data.way;\n        content.start = content.onway[0];\n        content.end = content.plan[content.plan.length - 1];\n        // let startDateShow = moment(content.startDate).format(\"k\");\n        // content.startDateShow = {\n        // \tmonth:startDate.month()+1,\n        // \tdate:startDate.date(),\n        // \tyear:startDate.year()\n        // };\n        let days = [],\n            nowDays = [],\n            old_w, daysIndex = {};\n\n        let initDay = function() {\n            if (nowDays.length > 0) {\n                let day = { date: nowDays[0].date, data: nowDays };\n                day.showDate = moment(day.date).format();\n                days.push(day);\n                nowDays = [];\n            }\n        }\n\n        for (let [i, w] of content.onway.entries()) {\n            w.dateShow = moment(w.date).format(\"kk\");\n            w.dateTime = moment(w.date).format(\"HH:mm\");\n            w.index = i;\n            if (old_w) {\n                if (moment(w.date).distance(old_w.date) !== 0) {\n                    initDay();\n                }\n                daysIndex[i] = days.length;\n            }\n            nowDays.push(w);\n            old_w = w;\n            // if(i!=content.onway.length-1){\n            // \tdelete w.location;\n            // }\n        }\n        initDay();\n\n\n        C.data.daysIndex = daysIndex;\n        C.data.days = days;\n        console.log(C.data);\n\n        for (let [i, w] of content.plan.entries()) {\n            if (i != content.plan.length - 1 && i != 0) {\n                delete w.location;\n            }\n        }\n\n        content.now = content.onway[content.onway.length - 1];\n    }\n\n    getData() {\n        let C = this;\n        Common.A.get(\"data/data.json\", (result) => {\n            if (result.status == 1) {\n                C.data = result.content;\n                C.dealData();\n\n                let travelInfoTemp = Handlebars.compile(template.detailInfo);\n                $('#blog .container').append(travelInfoTemp(C.data));\n\n                let timelineTemp = Handlebars.compile(template.timeLine);\n                $('#timeline').append(timelineTemp(C.data));\n        \t\t\n\n        \t\t$(\"#timeline .time\").tooltipster({\n\t\t\t\t\tposition: 'bottom',\n\t\t\t\t\ttheme: 'tooltipster-shadow'\n\t\t\t\t});\n\n                C.doms = {\n                    mouse: $(\"#mouse-next\"),\n                    container: $('#blog>.container'),\n                    timelines:$(\"#timeline .time\"),\n                    timelinesDiv:$(\"#timeline\")\n                };\n                //初次执行；\n                C.page = $(\".userInfo\");\n                let pos = C.getScrollPostion();\n                C.canMouse = !pos.isPageDown;\n                if (pos.isPageDown) {\n                    C.showMouse();\n                } else {\n                    C.hideMouse();\n                }\n                // for(let [i,data] of C.data.content.entries()){\n                // \tlet content = data.way;\n                // \tlet mapDom = $(\"#mapContainer_\" + i);\n\n                C.map = new Map(\"mapContainer\", C.data.way, { user_marker: true, polyline_animated: true, zoom: true });\n                C.doms.timelines.filter(\"[index='0']\").addClass(\"focused\");\n                C.doms.timelines.on(\"click\",function(){\n                \tlet _this = $(this);\n                \tlet _index = parseInt(_this.attr(\"index\"));\n                \tlet type = C.index>_index?\"down\":\"up\";\n                    C.index = _index;\n                    C.changePage(type);\n                });\n                // let drawPoly = map.drawPolyline(C.data.way.plan,Map.GREY);\n                // let drawPoly = map.drawPolyline(C.data.way.onway,Map.COLORFUL);\n                // \tmap.drawPolyline(content.onway,Map.COLORFUL);\n                // \tmap.focus(drawPoly);\n                // $(\".leaflet-marker-icon\").tooltipster();\n                // }\n            }\n        });\n    }\n}\n\nlet getControl = () => {\n    return new Control();\n}\nexport default getControl;\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/way/control.js\n **/"],"sourceRoot":""}